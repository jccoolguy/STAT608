---
title: "STAT 608 HW 3"
author: "Jack Cunningham (jgavc@tamu.edu)"
date: 09/23/2024
date-format: short
format:
  pdf:
    include-in-header:
      - text: |
          \usepackage{amsmath}
editor: visual
engine: knitr
---

1\.

a\)

The business analyst claims that this model is highly effective for understanding the effects of Distance on Fare and predicting future values of Fare, there a few issues with this conclusion. First when we look at the standard residual plot we see that there appears to be a discernible quadratic pattern. With $n=17$ it is very important that residuals be distributed i.i.d $N(0,\sigma^2)$ in order to make inference on coefficient estimates. Additionally with $\textbf{any}$ sized sample residuals must be distributed i.i.d $N(0,\sigma^2)$ in order to create prediction intervals about the response variable.

Wwith our current model there are also two outlier points I have labeled in red below. These need to be further analyzed.

```{r echo=FALSE}
airfares <- read.delim("airfares.txt",sep = "\t", header = TRUE)
attach(airfares)
airfare_slr <- lm(Fare ~ Distance)
```

```{r echo=FALSE, fig.width = 5,fig.height = 3.5}
leverage1 <- hatvalues(airfare_slr)
StanRes1 <- rstandard(airfare_slr)
residual1 <- airfares$residuals
plot(Distance,StanRes1, ylab="Standardized Residuals")
abline(h=2,lty=2)
abline(h=-2,lty=2)
points(x = c(Distance[13],Distance[17]),y = c(StanRes1[13],StanRes1[17])
       ,col = "red")
text(x = c(Distance[13],Distance[17]), y = c(StanRes1[13],StanRes1[17]), labels = c("13","17"), cex = .7, pos = c(2,3))
```

b\)

The ordinary straight line regression does not appear to fit the data well. We can see a clear quadratic pattern in the standardized residuals. I would recommend introducing the term $Distance^2$ and analyzing the standardized residuals again. I would also examine the properties of point 13 as this appears to be a bad leverage point.

```{r}
airfares$Distance2 <- airfares$Distance^2
airline_quad <- lm(Fare~Distance + Distance2, data = airfares[c(1:12,14:17),])
summary(airline_quad)
```

```{r}
plot(airline_quad)
```

```{r echo=FALSE, fig.width = 5,fig.height = 3.5}
leverage1 <- hatvalues(airline_quad)
StanRes1 <- rstandard(airline_quad)
residual1 <- airfares$residuals
plot(Distance[c(1:12,14:17)],StanRes1, ylab="Standardized Residuals")
abline(h=2,lty=2)
abline(h=-2,lty=2)
points(x = c(Distance[13],Distance[17]),y = c(StanRes1[13],StanRes1[17])
       ,col = "red")
text(x = c(Distance[13],Distance[17]), y = c(StanRes1[13],StanRes1[17]), labels = c("13","17"), cex = .7, pos = c(2,3))
```
